<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>机器人管理控制台</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/signin.css" rel="stylesheet">
</head>
<body>
<div class="container">
    <h2 class="form-signin-heading">机器人管理
        <button class="btn btn-lg btn-primary pull-right" id="addRobot">添加机器人</button>
    </h2>
    
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>状态</th>
                <th>最后活跃</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody id="robotList">
            <!-- 动态加载机器人列表 -->
        </tbody>
    </table>
</div>

<script src="/js/axios.min.js"></script>
<script>
    // 初始化加载机器人列表
    function loadRobots() {
        axios.get('/api/robots')
            .then(response => {
                const tbody = document.getElementById('robotList');
                tbody.innerHTML = response.data.map(robot => `
                    <tr>
                        <td>${robot.id}</td>
                        <td><span class="label label-${robot.status === '在线' ? 'success' : 'danger'}">${robot.status}</span></td>
                        <td>${robot.lastActive}</td>
                        <td>
                            <button class="btn btn-xs btn-info" onclick="controlRobot('${robot.id}', 'start')">启动</button>
                            <button class="btn btn-xs btn-warning" onclick="controlRobot('${robot.id}', 'stop')">停止</button>
                            <button class="btn btn-xs btn-danger" onclick="deleteRobot('${robot.id}')">删除</button>
                        </td>
                    </tr>
                `).join('');
            });
    }

    // 添加机器人
    document.getElementById('addRobot').addEventListener('click', () => {
        axios.post('/api/robots')
            .then(loadRobots);
    });

    // 初始化加载
    loadRobots();
</script>
</body>
</html>