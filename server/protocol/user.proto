syntax = "proto3";
import "item.proto";
import "bag.proto";
import "role.proto";
import "ghost.proto";

//----------------------------------新增协议----------------------------------//
message PBRankNode{
		int32 grade = 1;//品阶
		int32 level = 2;//品级
		int32 star = 3;//当前星星数量
		int32 score = 4;//隐藏分
		int32 zhu_ji_points = 5;//筑基点（用于升星或抵扣星星）
		int32 all_stars = 6;//所有星星数（记录玩家所有的星星数量，用于换算品阶、品级这些）
}
// 段位
message PBRankLevel
{
	
	PBRankNode ghost_rank = 1;
	PBRankNode human_rank = 2;
	// 历史最高段位
	PBRankNode ghost_top_rank = 3;
	PBRankNode human_top_rank = 4;
}

// 玩家账号属性信息
message PBUserAttr
{
	int64 uid             = 1;
    string plateform_id    = 2;
	string nick_name       = 3;
    int32 head_icon       = 4;
    int32 sex             = 5;// 0-未选 1-男 2-女
    int32 praise_num      = 6;// 点赞
    int32 head_frame      = 7;// 头像框
    int64 account_create_time = 8;// 账户创建时间
	// 账户经验 账户等级
    int32 account_level   = 9;
    int32 account_exp     = 10;
    // 战队ID
    int64 guild_id       = 11;
    string guild_name      = 12;
	// 段位信息
	PBRankLevel rank_level	= 13;	//	覆盖更新
    PBSimpleRoleData cur_show_role = 14;	//	覆盖更新
    PBPinchFaceData pinch_face_data = 15;	// 捏脸数据	覆盖更新
	int32 title     = 16;	//当前佩戴的称号
	int32 player_flag  = 17;	//玩家标签
	int32 online_time   = 18;	//最后一次在线时间
	int64 sum_online_time = 19;	//累计在线时长 单位秒
	PBSimpleGhostData cur_show_ghost	= 20;	//	覆盖更新
	int32 is_online = 21;	//是否在线
	// 聊天禁言相关
	bool chat_ban = 22;        // 是否禁言
	int64 chat_ban_time = 23;  // 禁言时间(结束时间)
	int64 last_chat_time = 24; // 上次发言时间
}

// 客户端请求简略数据
message PBClientGetUsrSimInfoReqCmd
{
    // 协议数据
    int64 uid             = 1;
}

// 客户端请求简略数据 返回信息
message PBClientGetUsrSimInfoRspCmd
{
    int32 code        = 1; // 服务器验证返回,0成功,其他失败
    string error      = 2; // 错误信息
    int64 uid         = 3; // 用户ID
    PBUserAttr info = 4;	// 简略信息
}

// 客户端请求账号属性全数据
message PBClientGetAllUserAttrReqCmd
{
    // 协议数据
    int64 uid             = 1;
}

// 客户端请求账号属性全数据 返回信息
message PBClientGetAllUserAttrRspCmd
{
    int32 code        = 1; // 服务器验证返回,0成功,其他失败
    string error      = 2; // 错误信息
    int64 uid         = 3; // 用户ID
    PBUserAttr info = 4;	// 简略信息
}

// 客户端修改个人信息数据--类型受限
message PBSetUserAttrReqCmd
{
	int64 uid	= 1;
	int32 type	= 2; // 个人信息类型 @see PBPersonInfoType
	int32 value	= 3; // 个人信息值
}

message PBSetUserAttrRspCmd
{
	int32 code = 1; // 服务器验证返回,0成功,其他失败
	string error = 2; // 错误信息
	int32 type = 3;  // 个人信息类型 @see PBPersonInfoType
	int32 value = 4; // 个人信息值
}

// 服务器同步玩家属性信息
message PBUserAttrSyncCmd{
	PBUserAttr attr = 1;
}

// 客户端请求所有背包数据
message PBClientGetUsrBagsInfoReqCmd
{
    // 协议数据
    int64 uid             = 1;
}

message PBClientGetUsrBagsInfoRspCmd
{
    int32 code        = 1; // 服务器验证返回,0成功,其他失败
    string error      = 2; // 错误信息
    int64 uid         = 3; // 用户ID
    PBBags bags_info		= 4;	// 所有背包数据
	PBUserCoins coins_info	= 5;	// 所有货币数据
}

// 客户端请求--装备开光
message PBClientLightReqCmd
{
	int64 uid		= 1;
	int32 roleid	= 2;
	int64 ghostid	= 3;
	string bag_name	= 4;
	int32 pos		= 5;
	int32 config_id = 6;
	int64 uniqid	= 7;
}

message PBClientLightRspCmd
{
	int32 code		= 1; // 服务器验证返回,0成功,其他失败
    string error	= 2; // 错误信息
	int64 uid		= 3;
	int32 roleid	= 4;
	int64 ghostid	= 5;
	string bag_name	= 6;
	int32 pos		= 7;
	int32 config_id = 8;
	int64 uniqid	= 9;
}

// 客户端请求--道具、角色、鬼宠升级
message PBClientItemUpLvReqCmd
{
	int64 uid		= 1;
	int32 config_id = 2;
	int32 add_exp	= 3;
}

message PBClientItemUpLvRspCmd
{
	int32 code		= 1; // 服务器验证返回,0成功,其他失败
    string error	= 2; // 错误信息
	int64 uid		= 3;
	int32 config_id = 4;
	int32 add_exp	= 5;
}

// 客户端请求--使用道具升级
message PBUseItemUpLvReqCmd
{
	int64 uid		= 1;
	int32 target_id = 2;
	int32 cost_id	= 3;
	int32 cost_num	= 4;
}

message PBUseItemUpLvRspCmd
{
	int32 code		= 1; // 服务器验证返回,0成功,其他失败
    string error	= 2; // 错误信息
	int64 uid		= 3;
	int32 target_id = 4;
	int32 cost_id	= 5;
	int32 cost_num	= 6;
}

// 客户端请求--道具升星
message PBClientItemUpStarReqCmd
{
	int64 uid		= 1;
	int32 config_id = 2;
}

message PBClientItemUpStarRspCmd
{
	int32 code		= 1; // 服务器验证返回,0成功,其他失败
    string error	= 2; // 错误信息
	int64 uid		= 3;
	int32 config_id = 4;
}

// 客户端请求--道具维修
message PBClientItemRepairReqCmd
{
	int64 uid			= 1;
	int64 repair_uniqid	= 2;	// 要修复的装备唯一id
	int32 pos			= 3;	// 装备所在的格子号
}

message PBClientItemRepairRspCmd
{
	int32 code		= 1; // 服务器验证返回,0成功,其他失败
    string error	= 2; // 错误信息
	int64 uid			= 3;
	int64 repair_uniqid	= 4;
	int32 pos			= 5;	// 装备所在的格子号
}

// 客户端请求他人简略信息
message PBGetOtherSimpleReqCmd
{
    // 协议数据
    int64 uid		= 1;
	int64 quest_uid	= 2;
}

// 客户端请求他人简略信息 返回信息
message PBGetOtherSimpleRspCmd
{
    int32 code			= 1; // 服务器验证返回,0成功,其他失败
    string error		= 2; // 错误信息
    int64 uid			= 3; // 自己的uid
	int64 quest_uid		= 4; // 他人uid
    PBUserAttr info		= 5; // 简略信息
}

// 客户端请求他人详细信息
message PBGetOtherDetailReqCmd
{
    // 协议数据
    int64 uid		= 1;
	int64 quest_uid	= 2;
}

// 客户端请求他人详细信息 返回信息
message PBGetOtherDetailRspCmd
{
    int32 code			= 1; // 服务器验证返回,0成功,其他失败
    string error		= 2; // 错误信息
    int64 uid			= 3; // 自己的uid
	int64 quest_uid		= 4; // 他人uid
    PBUserAttr info		= 5; // 账号信息
	PBRoleData role_data	= 6; // 角色数据
	PBGhostData ghost_data	= 7; // 鬼宠数据
}

// 客户端使用皮肤礼包
message PBUseSkinGiftReqCmd
{
    int64 uid			= 1; // 自己的uid
    int32 gift_id		= 3; // 礼包id
}

message PBUseSkinGiftRspCmd
{
    int32 code			= 1; // 服务器验证返回,0成功,其他失败
    string error		= 2; // 错误信息
    int64 uid			= 3; // 自己的uid
    int32 gift_id		= 4; // 礼包id
}

// 客户端固定合成
message PBSureCompositeReqCmd
{
	int64 uid			= 1;
	int32 composite_id	= 2; // 合成id
	int32 composite_cnt	= 3; // 合成数量
}

message PBSureCompositeRspCmd
{
	int32 code			= 1; // 服务器验证返回,0成功,其他失败
    string error		= 2; // 错误信息
	int64 uid			= 3;
	int32 composite_id	= 4; // 合成id
	int32 composite_cnt	= 5; // 合成数量
}

// 客户端随机合成
message PBRandomCompositeReqCmd
{
	int64 uid			= 1;
	int32 composite_id	= 2; // 合成id
	int32 composite_cnt	= 3; // 合成数量
}

message PBRandomCompositeRspCmd
{
	int32 code			= 1; // 服务器验证返回,0成功,其他失败
    string error		= 2; // 错误信息
	int64 uid			= 3;
	int32 composite_id	= 4; // 合成id
	int32 composite_cnt	= 5; // 合成数量
}

// 法器或者八卦牌镶嵌讳字
message PBInlayTabooWordReqCmd
{
    int64 uid	= 1;
	int32 roleid	= 2;	//角色id
	int64 ghost_uniqid	= 3;	//鬼宠唯一id
	int32 inlay_type	= 4;	//1-法器 2-八卦牌
	int64 uniqid	= 5;	//道具id
	int32 tabooword_id	= 6;	//讳字id
}

message PBInlayTabooWordRspCmd
{
    int32   code    = 1; // 服务器验证返回,0成功,其他失败
    string  error   = 2; // 错误信息
    int64   uid     = 3;
	int32 roleid	= 4;	//角色id
	int64 ghost_uniqid	= 5;	//鬼宠唯一id
	int32 inlay_type	= 6;	//1-法器 2-八卦牌
	int64 uniqid	= 7;	//道具id
	int32 tabooword_id	= 8;	//讳字id
}

// 修改昵称
//message PBModNickNameReqCmd
//{
//	int64 uid	= 1;
//	string nick_name       = 2;
//}

//message PBModNickNameRspCmd
//{
//	int32   code    = 1; // 服务器验证返回,0成功,其他失败
//    string  error   = 2; // 错误信息
//	int64 uid	= 3;
//	string nick_name       = 4;
//}